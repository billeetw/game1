<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>æ™‚é–“é»‘æ´è¨ˆç®—æ©Ÿï½œé€²éšç‰ˆ</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700&display=swap" rel="stylesheet" />
<style>
:root{--accent:#ffb347;--bg:#35281d;--text:#fff;--panel:#5c4634ee;--btn:#a3ffae;}
*{box-sizing:border-box;margin:0;padding:0;}
body{
  font-family:"Noto Sans TC",sans-serif;
  background:radial-gradient(circle at 30% 30%,#ffe7d2 0%,#fcb69f 35%,#d18552 65%,var(--bg) 100%);
  color:var(--text);display:flex;flex-direction:column;align-items:center;min-height:100vh;padding:2rem;
}
h1{font-size:2rem;margin-bottom:1.5rem;letter-spacing:2px;text-align:center;}
#app{width:100%;max-width:540px;background:var(--panel);padding:1.8rem 2.2rem;border-radius:12px;box-shadow:0 0 14px rgba(0,0,0,.4);}
.item{display:grid;grid-template-columns:1fr 90px 90px;align-items:center;gap:.5rem;margin:1rem 0;}
.item label{justify-self:start;}
.item input{width:100%;padding:.4rem;text-align:center;border-radius:6px;border:none;}
.item span{font-size:.9rem;}
button{width:100%;padding:1rem;font-size:1.1rem;border:none;border-radius:6px;background:var(--accent);color:#000;font-weight:700;cursor:pointer;margin-top:1.3rem;}
#result{margin-top:1.6rem;text-align:center;display:none;}
canvas{max-width:320px;margin:1rem auto 0;display:block;}
</style>
</head>
<body>
<h1>æ™‚é–“é»‘æ´è¨ˆç®—æ©Ÿ</h1>
<div id="app"></div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
/* ---------- å¯æ›¿æ›æ´»å‹•è¨­å®š ---------- */
const activities = [
  { id:'tiktok', label:'åˆ· TikTok / Reels', color:'#ffadad' },
  { id:'binge',  label:'è¿½åŠ‡ (Netflix ç­‰)', color:'#ffd6a5' },
  { id:'stock',  label:'ç›¯ç›¤ / è²¡ç¶“æ–°è',  color:'#fdffb6' },
  { id:'gaming', label:'æ‰‹éŠ / Steam éŠæˆ²', color:'#caffbf' }
];
/* å®¢æˆ¶å¯æ”¹ï¼šå–„èˆ‰ä»»å‹™æ¸…å–® */
const goodDeeds = ['ä»Šå¤©ç¨±è®šä¸€ä½åŒäº‹','ç¡å‰ä¼¸å±• 5 åˆ†é˜','æ‰“é›»è©±é—œå¿ƒå®¶äºº','æŠŠæ‰‹æ©Ÿæ”¾åˆ°å¦ä¸€å€‹æˆ¿é–“ 1 å°æ™‚'];

const app = document.getElementById('app');

/* -------- å‹•æ…‹ç”Ÿæˆè¼¸å…¥æ¬„ -------- */
activities.forEach(({id,label})=>{
  const row=document.createElement('div');row.className='item';
  row.innerHTML = `
    <label for="${id}_h">${label}</label>
    <input id="${id}_h" type="number" min="0" max="24" step="0.5" placeholder="0"><span>å°æ™‚/å¤©</span>
    <input id="${id}_d" type="number" min="0" max="7"  step="1"   placeholder="7"><span>å¤©/é€±</span>
  `;
  app.appendChild(row);
});
/* æŒ‰éˆ•èˆ‡çµæœå€ */
const btn=document.createElement('button');btn.textContent='è¨ˆç®—è’¸ç™¼æ—¥å­';
const result=document.createElement('div');result.id='result';
app.appendChild(btn);app.appendChild(result);

btn.onclick=()=>{
  let totalYearHours=0, labels=[], hoursArr=[], colors=[];
  activities.forEach(({id,label,color})=>{
    const h = +document.getElementById(`${id}_h`).value || 0;
    const d = +document.getElementById(`${id}_d`).value || 0;
    const weekly = h*d;               // æ¯é€±å°æ™‚
    const yearly = weekly*52;         // æ¯å¹´å°æ™‚
    if(yearly>0){
      labels.push(label);
      hoursArr.push(yearly);
      colors.push(color);
    }
    totalYearHours += yearly;
  });
  const lostDays = (totalYearHours/24).toFixed(1);

  /* é¡¯ç¤ºçµæœ */
  result.style.display='block';
  result.innerHTML=`<p>ğŸ˜± æˆ‘ä¸€å¹´ç«Ÿç„¶ã€Œè’¸ç™¼ã€äº† <strong>${lostDays}</strong> å¤©ï¼</p><canvas id="chart"></canvas><p id="todo"></p>`;

  /* éš¨æ©Ÿå–„èˆ‰ */
  const deed = goodDeeds[Math.random()*goodDeeds.length|0];
  document.getElementById('todo').innerHTML = `ğŸ‘‰ ä»Šæ—¥è¡Œå‹•ï¼š<em>${deed}</em>`;

  /* ç•« Chart */
  const ctx=document.getElementById('chart');
  new Chart(ctx,{
    type:'doughnut',
    data:{labels, datasets:[{data:hoursArr,backgroundColor:colors}]},
    options:{plugins:{legend:{position:'bottom'}},cutout:'45%'}
  });
};
</script>
</body>
</html>
